<!DOCTYPE html>
<html lang="en" x-data="app()">
<head>
  <meta charset="UTF-8">
  <title>Lanuit Admin</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Alpine.js -->
  <script src="https://unpkg.com/alpinejs" defer></script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Favicons -->
  <link rel="icon" type="image/png" sizes="16x16" href="icons/favicon-16x16.png">
  <link rel="icon" type="image/png" sizes="32x32" href="icons/favicon-32x32.png">
  <link rel="apple-touch-icon" sizes="180x180" href="icons/apple-icon-180x180.png">
</head>

<body>
  <img id="animatedImage" src="icons/logo1x.png" alt="Logo">
  <div class="new-screen">

    <!-- LOGIN -->
    <div x-show="page === 'login'" class="login-container">
      <div class="login-form">
        <img src="icons/logo1x.png" alt="Login" class="login-image">
        <input type="text" placeholder="Login" x-model="loginUsername">

        <div class="password-wrapper">
          <input :type="showLoginPassword ? 'text' : 'password'" placeholder="Password" x-model="loginPassword">
          <span class="toggle-password" @click="showLoginPassword = !showLoginPassword">
            👁
          </span>
        </div>

        <button @click="login()">Log in</button>
      </div>
      <p class="register-link">
        Don’t have an account? <a @click="page = 'register'">Sign Up</a>
      </p>
    </div>

    <!-- REGISTER -->
    <div x-show="page === 'register'" class="login-container">
      <div class="login-form">
        <img src="icons/logo1x.png" alt="Register" class="login-image">
        <input type="text" placeholder="Login" x-model="registerUsername">

        <div class="password-wrapper">
          <input :type="showRegisterPassword ? 'text' : 'password'" placeholder="Password" x-model="registerPassword">
          <span class="toggle-password" @click="showRegisterPassword = !showRegisterPassword">👁</span>
        </div>

        <div class="password-wrapper confirm">
          <input :type="showConfirmPassword ? 'text' : 'password'" placeholder="Confirm Password"
                 x-model="confirmPassword">
          <span class="toggle-password" @click="showConfirmPassword = !showConfirmPassword">👁</span>
        </div>

        <button @click="register()">Register</button>
      </div>
      <p class="register-link">
        Already have an account? <a @click="page = 'login'">Log in</a>
      </p>
    </div>

    <!-- REGISTER RESPONSE -->
    <div x-show="page === 'registerResponse'" class="login-container">
      <div class="login-form">
        <img src="icons/logo1x.png" alt="Register Response" class="login-image">
        <h2 class="register-success">Registration successful!</h2>
        <p class="register-success single-line">
          Confirmation email sent to:
          <span x-text="registerUsername"></span>
        </p>
      </div>
      <p class="register-link">
        Back to <a @click="page = 'login'">Log in</a>
      </p>
    </div>

    <!-- MAIN -->
    <div x-show="page === 'main'" class="split-container">
      <aside class="split-sidebar">
        <nav class="tab-nav">
          <button @click="activeTab = 'tab1'" :class="{ 'active': activeTab === 'tab1' }">Dashboard</button>
          <button @click="activeTab = 'tab2'" :class="{ 'active': activeTab === 'tab2' }">Products</button>
          <button @click="activeTab = 'tab3'" :class="{ 'active': activeTab === 'tab3' }">Orders</button>
          <button @click="activeTab = 'tab4'" :class="{ 'active': activeTab === 'tab4' }">Settings</button>
        </nav>
      </aside>

      <main class="split-content">

        <!-- Dashboard -->
        <div 
          x-show="activeTab === 'tab1'"
          x-init="saleStatisticsGraph()"
          class="tab-content">
          <h1 class="page-title">Dashboard</h1>
          <canvas id="salesChart" width="400" height="200"></canvas>
        </div>

        <!-- Products -->
        <div x-show="activeTab === 'tab2'" class="tab-content">
          <h1 class="page-title">Products</h1>
          <button @click="showAddCategory = true">Add Category</button>

          <p x-show="products.length === 0">There is no product yet</p>

          <div x-show="products.length > 0" class="product-list">
            <template x-for="(product, index) in products" :key="index">
              <div class="product-row">
                <p x-text="product"></p>
              </div>
            </template>
          </div>
        </div>

        <!-- Other tabs -->
        <div x-show="activeTab === 'tab3'" class="tab-content">
          <h1>Orders</h1>
        </div>

        <div x-show="activeTab === 'tab4'" class="tab-content">
          <h1>Settings</h1>
        </div>

      </main>
    </div>

    <!-- ADD CATEGORY MODAL -->
    <div x-show="showAddCategory" class="alert-backdrop" x-transition>
      <div class="alert-box">
        <h2>Name</h2>
        <input type="text" placeholder="Enter product name" x-model="newCategory">
        <button @click="showAddCategory = false">Cancel</button>
        <button @click="
          if(newCategory.trim() !== '') {
            products.push(newCategory.trim());
            newCategory = '';
            showAddCategory = false;
          }
        ">Create</button>
      </div>
    </div>

  </div>

  <script src="app.js"></script>
</body>
</html>
